--- CMakeLists.txt.orig	2009-09-06 09:47:14.139386208 +0200
+++ CMakeLists.txt	2009-09-14 11:33:25.262236824 +0200
@@ -44,6 +44,20 @@
 
 CMAKE_MINIMUM_REQUIRED(VERSION 2.4)
 PROJECT(Blender)
+IF(COMMAND CMAKE_POLICY)
+	CMAKE_POLICY(SET CMP0000 NEW)
+	CMAKE_POLICY(SET CMP0001 NEW)
+	CMAKE_POLICY(SET CMP0002 NEW)
+	CMAKE_POLICY(SET CMP0003 NEW)
+	CMAKE_POLICY(SET CMP0004 NEW)
+	CMAKE_POLICY(SET CMP0005 NEW)
+	CMAKE_POLICY(SET CMP0006 NEW)
+	CMAKE_POLICY(SET CMP0007 NEW)
+	CMAKE_POLICY(SET CMP0008 NEW)
+	CMAKE_POLICY(SET CMP0009 NEW)
+	CMAKE_POLICY(SET CMP0010 NEW)
+	CMAKE_POLICY(SET CMP0011 NEW)
+ENDIF(COMMAND CMAKE_POLICY)
 
 #-----------------------------------------------------------------------------
 # Redirect output files
@@ -90,18 +104,24 @@
 #-----------------------------------------------------------------------------
 # Load some macros.
 INCLUDE(CMake/macros.cmake)
+SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_SOURCE_DIR}/CMake)
 
 #-----------------------------------------------------------------------------
 #Platform specifics
 
 IF(UNIX AND NOT APPLE)
+
+	#IF(WITH_BULLET)
+	#	FIND_PACKAGE(Bullet REQUIRED)
+	#ENDIF(WITH_BULLET)
+
 	IF(WITH_OPENAL)
-		FIND_PACKAGE(OpenAL)
-		IF(OPENAL_FOUND)
-			SET(WITH_OPENAL ON)
-		ELSE(OPENAL_FOUND)
-			SET(WITH_OPENAL OFF)
-		ENDIF(OPENAL_FOUND)
+		FIND_PACKAGE(OpenAL REQUIRED)
+		#IF(OPENAL_FOUND)
+		#	SET(WITH_OPENAL ON)
+		#ELSE(OPENAL_FOUND)
+		#	SET(WITH_OPENAL OFF)
+		#ENDIF(OPENAL_FOUND)
 	ENDIF(WITH_OPENAL)
 
 	IF(WITH_JACK)
@@ -133,7 +153,7 @@
 		SET(GETTEXT_LIB ${INTL_LIBRARY} ${ICONV_LIBRARY})
 	ENDIF(INTL_LIBRARY AND ICONV_LIBRARY)
 
-	FIND_PACKAGE(Freetype)
+	FIND_PACKAGE(Freetype REQUIRED)
 	# UNSET(FREETYPE_INCLUDE_DIRS CACHE) # cant use
 
 	# No way to set py31. remove for now.
@@ -151,11 +171,11 @@
 	SET(PYTHON_LINKFLAGS "-Xlinker -export-dynamic")
 
 	IF(WITH_SDL)
-		FIND_PACKAGE(SDL)
+		FIND_PACKAGE(SDL REQUIRED)
 		# UNSET(SDLMAIN_LIBRARY CACHE)
-		IF(NOT SDL_FOUND)
-			SET(WITH_SDL OFF)
-		ENDIF(NOT SDL_FOUND)
+		#IF(NOT SDL_FOUND)
+		#	SET(WITH_SDL OFF)
+		#ENDIF(NOT SDL_FOUND)
 	ENDIF(WITH_SDL)
 
 	FIND_PATH(OPENEXR_INC
@@ -393,12 +413,12 @@
 	ENDIF(CMAKE_OSX_ARCHITECTURES MATCHES i386)
 
 	IF(WITH_OPENAL)
-		FIND_PACKAGE(OpenAL)
-		IF(OPENAL_FOUND)
-			SET(WITH_OPENAL ON)
-		ELSE(OPENAL_FOUND)
-			SET(WITH_OPENAL OFF)
-		ENDIF(OPENAL_FOUND)
+		FIND_PACKAGE(OpenAL REQUIRED)
+		#IF(OPENAL_FOUND)
+		#	SET(WITH_OPENAL ON)
+		#ELSE(OPENAL_FOUND)
+		#	SET(WITH_OPENAL OFF)
+		#ENDIF(OPENAL_FOUND)
 	ENDIF(WITH_OPENAL)
 
 	IF(WITH_JACK)
@@ -526,9 +546,9 @@
 #-----------------------------------------------------------------------------
 # Common.
 
-set(OPENJPEG ${CMAKE_SOURCE_DIR}/extern/libopenjpeg)
-set(OPENJPEG_INC ${OPENJPEG})
-set(OPENJPEG_LIb extern_libopenjpeg)
+IF(WITH_OPENJPEG)
+	FIND_PACKAGE(OpenJPEG REQUIRED)
+ENDIF(WITH_OPENJPEG)
 
 #-----------------------------------------------------------------------------
 # Blender WebPlugin
@@ -543,7 +563,7 @@
 
 #-----------------------------------------------------------------------------
 # Configure OpenGL.
-FIND_PACKAGE(OpenGL)
+FIND_PACKAGE(OpenGL REQUIRED)
 INCLUDE_DIRECTORIES(${OPENGL_INCLUDE_DIR})
 # UNSET(OPENGL_LIBRARIES CACHE) # not compat with older cmake 
 # UNSET(OPENGL_xmesa_INCLUDE_DIR CACHE) # not compat with older cmake 
